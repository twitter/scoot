# Scoot Client

Scoot Client contains the Scoot Cloud API Thrift definition, Cloud Server code,
autogenerated thrift code in both Golang and Java, and client/CLI code for the API. 

It consists of a cli directory that defines the command line interface for talking
to scoot, and a scootcl directory with a main() that exercises that CLI. There is also a top level client.go file that issues the commands exercised by the CLI via thrift to the scheduler.

## Design and Summary
The API itself is defined in scoot.thrift, as service CloudScoot.

##### Server

The server package provides for the implementation of the Cloud API Server. At this time, the server instance is also the collective entry point for the server and scheduler components.
The setup of these is defined by server.Defaults(), which sets up the ice.MagicBag DI and configurations (see scoot/ice). The major components here are setup for:
* Saga Coordinator
* Saga Log
* Scheduler
* API server/handler
* Thrift interface
* Configuration Schema

The main elements here are:
* __MakeHandler__ - main Cloud Scoot API Handler. Implementation here includes scheduler, saga coordinator, and stats receiver.
* __MakeServer__ - wraps the Handler with Thrift connection info and glues the API handler logic to the Thrift interface
* __RunJob__ and __GetStatus__ - API handler implementations

##### Client

The client code supports creating a CLI client interface to the Cloud API.  The main interface is __CLIClient__, which defines an Exec function, which will execute a command specified on the command line against the Cloud API.

The __simpleCLIClient__ type implements this interface, and uses github.com/spf13/cobra for command line parsing. The client's communication to Cloud Scoot is done through a Dialer - see scoot/common/dialer.

##### Cloud Scoot Setup

The setup package is a way to initialize a Scoot instance by a strategy, which
defines how the scheduler and workers will be run (locally, in memory, etc).
In a 'local' run, Cloud Setup itself is invoking the other Scoot binaries,
sparing you from running everything independently. This is invoked (setup.Main) with:
* __Cmds__ - exec commands that will be run against the new cloud scoot instance
* __SchedulerStrategy__ - definition of the logic for invoking the scheduler, including WorkersStrategy and Builder

Other Concepts:
* __WorkersStrategy__ - defines the logic for how to invoke the Workers
* __Builder__ - interface that allows specification of how to create the scheduler and worker binaries Cloud Setup will invoke

